{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- SEO -->
    <title>{% block title %}PRCE - Plataforma de Registro y Control de Eventos{% endblock %}</title>
    <meta name="description" content="Sistema de gestión integral de eventos, inscripciones y certificados">
    
    <!-- Accesibilidad -->
    <meta name="theme-color" content="#2c3e50">
    <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Header -->
    <header class="header" role="banner">
        <div class="container">
            <div class="d-flex justify-between align-center">
                <div>
                    <h1 class="header-title">
                        <a href="{% url 'dashboard:index' %}" style="color: white; text-decoration: none;">
                            PRCE - Sistema de Eventos
                        </a>
                    </h1>
                </div>
                
                {% if user.is_authenticated %}
                <div style="color: white;">
                    <span>{{ user.get_full_name|default:user.username }}</span>
                    <span class="badge badge-secondary">{{ user.get_rol_display|default:"Usuario" }}</span>
                </div>
                {% endif %}
            </div>
            
            {% if user.is_authenticated %}
            <nav class="nav" role="navigation" aria-label="Navegación principal">
                <a href="{% url 'dashboard:index' %}" class="nav-link">Dashboard</a>
                
                {% if user.puede_gestionar_eventos %}
                <a href="{% url 'eventos:lista' %}" class="nav-link">Eventos</a>
                <a href="{% url 'inscripciones:lista' %}" class="nav-link">Inscripciones</a>
                <a href="{% url 'asistencias:lista' %}" class="nav-link">Asistencias</a>
                {% endif %}
                
                {% if user.es_administrador %}
                <a href="{% url 'usuarios:lista' %}" class="nav-link">Usuarios</a>
                <a href="/admin/" class="nav-link">Admin</a>
                {% endif %}
                
                <a href="{% url 'usuarios:perfil' %}" class="nav-link">Mi Perfil</a>
                <a href="{% url 'usuarios:logout' %}" class="nav-link">Cerrar Sesión</a>
            </nav>
            {% endif %}
        </div>
    </header>
    
    <!-- Main Content -->
    <main id="main-content" class="main-content" role="main">
        <div class="container">
            <!-- Mensajes -->
            {% if messages %}
            <div class="messages" role="alert">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
            
            <!-- Breadcrumb -->
            {% block breadcrumb %}{% endblock %}
            
            <!-- Page Title -->
            {% block page_title %}{% endblock %}
            
            <!-- Content -->
            {% block content %}{% endblock %}
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <p>&copy; {% now "Y" %} PRCE - Plataforma de Registro y Control de Eventos</p>
            <p>Ingeniería de Requisitos</p>
        </div>
    </footer>
    
    <!-- JavaScript -->
    <script src="{% static 'js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>

